<!DOCTYPE html>
<html>
<head>
<!-- 2016-10-14 Fri 10:08 -->
<meta  charset="utf-8">
<meta  name="viewport" content="width=device-width, initial-scale=1">
<title>Works</title>
<meta  name="generator" content="Org-mode">
<meta  name="author" content="Junjia Ni">
<meta  name="description" content="Works"
>
<meta  name="keywords" content="emacs,orgmode">
<link rel="stylesheet" type="text/css" href="/static/article.css">
</head>
<body>
<div id="content">
<h1 class="title">Works</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">1. 前言</a></li>
<li><a href="#orgheadline6">2. Keyboard-js</a>
<ul>
<li><a href="#orgheadline2">2.1. 项目地址</a></li>
<li><a href="#orgheadline3">2.2. 项目成员</a></li>
<li><a href="#orgheadline4">2.3. 项目描述</a></li>
<li><a href="#orgheadline5">2.4. 难点和收获</a></li>
</ul>
</li>
<li><a href="#orgheadline11">3. 基于 Web 技术的多屏控制系统 (C/S)</a>
<ul>
<li><a href="#orgheadline7">3.1. 项目地址</a></li>
<li><a href="#orgheadline8">3.2. 项目成员</a></li>
<li><a href="#orgheadline9">3.3. 项目描述</a></li>
<li><a href="#orgheadline10">3.4. 难点和收获</a></li>
</ul>
</li>
<li><a href="#orgheadline16">4. 基于 Midway 的报表展示系统 (B/S)</a>
<ul>
<li><a href="#orgheadline12">4.1. 项目地址</a></li>
<li><a href="#orgheadline13">4.2. 项目成员</a></li>
<li><a href="#orgheadline14">4.3. 项目描述</a></li>
<li><a href="#orgheadline15">4.4. 难点和收获</a></li>
</ul>
</li>
<li><a href="#orgheadline21">5. 智能⻝⽤菌养殖监控系统</a>
<ul>
<li><a href="#orgheadline17">5.1. 项目地址</a></li>
<li><a href="#orgheadline18">5.2. 项目成员</a></li>
<li><a href="#orgheadline19">5.3. 项目描述</a></li>
<li><a href="#orgheadline20">5.4. 难点和收获</a></li>
</ul>
</li>
<li><a href="#orgheadline22">6. 尾声</a></li>
</ul>
</div>
</div>


<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1"><span class="section-number-2">1</span> 前言</h2>
<div class="outline-text-2" id="text-1">
<p>
业余前端开发，干过一段时间监控。学艺不精，目前待业在家。
</p>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-2">
<h2 id="orgheadline6"><span class="section-number-2">2</span> Keyboard-js</h2>
<div class="outline-text-2" id="text-2">
</div><div id="outline-container-orgheadline2" class="outline-3">
<h3 id="orgheadline2"><span class="section-number-3">2.1</span> 项目地址</h3>
<div class="outline-text-3" id="text-2-1">
<ul class="org-ul">
<li><a href="https://github.com/creamidea/keyboard-js">Github</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3"><span class="section-number-3">2.2</span> 项目成员</h3>
<div class="outline-text-3" id="text-2-2">
<ul class="org-ul">
<li><a href="https://github.com/creamidea">Junjia Ni</a></li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4"><span class="section-number-3">2.3</span> 项目描述</h3>
<div class="outline-text-3" id="text-2-3">
<p>
一个用 Javascript 实现的键盘组合键的库。用于实现类似于 Gmail 邮箱内快捷的效果。<a href="https://creamidea.github.io/keyboard-js/">体验地址</a>  <br >
目前暂时只支持组合键触发的功能。连续按击的功能暂时还没有实现（比如，连续按2次A可以触发页面跳转等。）
</p>
</div>
</div>
<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5"><span class="section-number-3">2.4</span> 难点和收获</h3>
<div class="outline-text-3" id="text-2-4">
<p>
最初是看到这个 <a href="http://stackoverflow.com/a/12444641/1925954">答案</a> ，萌生了写一个组合键的库，方便任意页面实现组合键的功能。还有一点就是被答主的答题思路给震惊，悄悄地学习了一下。
</p>
<blockquote>
<p>
That isn't the most readable snippet. Readability's important, so you could try something like this to make it easier on the eyes.
</p>
</blockquote>
<p>
非常好的思路，将规则”可视化“了，便于人阅读和理解。有兴趣可以去看看这个 <a href="http://stackoverflow.com/a/12444641/1925954">答案</a> 以及答案下面的评论。
</p>

<p>
其实核心思想就是将规则可迭代化，每次检测的时候遍历之。匹配触发回调，不匹配则继续，直到结束。
然后这个思路不仅仅被我用在键盘组合键功能的实现上，还用在了一个小型前端路由的实现上。（参考<a href="https://github.com/creamidea/creamidea.github.com/blob/master/web-src/index.js">代码</a>）
</p>

<p>
这个真是状态机的优美实现之一。
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline11" class="outline-2">
<h2 id="orgheadline11"><span class="section-number-2">3</span> 基于 Web 技术的多屏控制系统 (C/S)</h2>
<div class="outline-text-2" id="text-3">
</div><div id="outline-container-orgheadline7" class="outline-3">
<h3 id="orgheadline7"><span class="section-number-3">3.1</span> 项目地址</h3>
<div class="outline-text-3" id="text-3-1">
<ul class="org-ul">
<li>Alibaba-Group</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline8" class="outline-3">
<h3 id="orgheadline8"><span class="section-number-3">3.2</span> 项目成员</h3>
<div class="outline-text-3" id="text-3-2">
<ul class="org-ul">
<li><a href="https://github.com/creamidea">Junjia Ni</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline9" class="outline-3">
<h3 id="orgheadline9"><span class="section-number-3">3.3</span> 项目描述</h3>
<div class="outline-text-3" id="text-3-3">
<p>
⽤户通过管理界⾯，实现对多块屏幕的显示控制系统。
</p>
<ul class="org-ul">
<li>Server 服务端是⼀个Node应⽤，具备⾼并发的能⼒。通过Websocket和客户端建⽴通信。使⽤ MongoDB 存储结构化数据。</li>
<li>Client 客户端是⼀个 ChromeApp。使⽤ React 框架构建，可以快速开发⾃定义形式的数据展示界⾯。</li>
<li>View ⽤户界⾯，使⽤ Angular 框架构建。提供⽤户管理系统的界⾯，显示系统运⾏情况。</li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline10" class="outline-3">
<h3 id="orgheadline10"><span class="section-number-3">3.4</span> 难点和收获</h3>
<div class="outline-text-3" id="text-3-4">
<p>
开发这套系统，使用了当时最新的前端开发技术。新手入门，好多坑啊。那段时间几乎每天都要写代码、研究代码到好晚。其实也是自己作。
现在来看过去，觉得最惨的就是没有用 <a href="https://github.com/babel/babel">babel/babel</a> 编译工具，而是使用了 <a href="https://github.com/google/traceur-compiler">google/traceur-compiler</a> ，浪费了好多时间。
（现在已经好久没有更新了。啊，滚滚的历史长河水。）
但具体有哪些坑呢？容我想想。
</p>

<p>
那段时间感觉整天都在写 <b>JS</b> , <b>JS</b> 的姿势水平有了很大的提高。有什么提高呢？感觉开始喜欢 <b>HTML</b> (开个玩笑)。
</p>

<p>
主要提高点个人感觉在熟悉程度上，你问我这个有什么用？ ，╮(╯▽╰)╭ 母鸡
</p>
<ul class="org-ul">
<li>Chrome App/Extension API 熟悉程度</li>
<li>Nodejs/Koajs 服务端开发熟练度，尤其是对于 <b>流</b> 、 <b>中间件</b> 和所谓的 <b>面向切片编程</b> 的理解</li>
<li>WebSocket 协议</li>
<li>MongoDB 熟悉程度</li>
<li>ES6:yield 等新特性的熟悉程度。（可以参考这篇：<a href="../articles/JavaScript-Cookie.html">JavaScript-Cookie</a>）</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orgheadline16" class="outline-2">
<h2 id="orgheadline16"><span class="section-number-2">4</span> 基于 Midway 的报表展示系统 (B/S)</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-orgheadline12" class="outline-3">
<h3 id="orgheadline12"><span class="section-number-3">4.1</span> 项目地址</h3>
<div class="outline-text-3" id="text-4-1">
<ul class="org-ul">
<li>Alibaba-Group</li>
</ul>
</div>
</div>
<div id="outline-container-orgheadline13" class="outline-3">
<h3 id="orgheadline13"><span class="section-number-3">4.2</span> 项目成员</h3>
<div class="outline-text-3" id="text-4-2">
<ul class="org-ul">
<li>BeiFeng</li>
<li>HuanTong</li>
<li><a href="http://zhuyongnan.cn/">Yongnan Zhu</a></li>
<li><a href="https://github.com/creamidea">Junjia Ni</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline14" class="outline-3">
<h3 id="orgheadline14"><span class="section-number-3">4.3</span> 项目描述</h3>
<div class="outline-text-3" id="text-4-3">
<p>
⽤户通过⾃定义数据源、⾃定义图表样式和显示布局，⾃动⽣成报表， 并⽀持订阅、管理等功能的系统。
前端用 <b>Nodejs</b> 渲染，后端 <b>Java</b> 处理具体的业务逻辑。数据库使用了集团统一的数据库池。
</p>
</div>
</div>

<div id="outline-container-orgheadline15" class="outline-3">
<h3 id="orgheadline15"><span class="section-number-3">4.4</span> 难点和收获</h3>
<div class="outline-text-3" id="text-4-4">
<p>
当时碰到的一个最头疼的问题就是登陆问题，内部所有有页面的应用都要接入 <b>统一接入层</b> （现在怎么样了呢？）。
理论上来讲，使用其相应的 <b>客户端SDK</b> 就可以很快接入。
嗯，事实也是这个样子的，后端通过提供的 <b>java-sdk</b> 很快完成接入（有多快？取决于开发者的能力）。
但是，现在有了一层渲染层。用户请求是先经过这个渲染层，之后再到达 java 处理逻辑。
后端是被剥夺了页面渲染能力的，也就是说不能直接给用户提供登陆页面。而 nodejs 层的认证信息又不能直接给 java， 因为 java 不认。
</p>

<p>
于是，我开启了我的作死技能。研究统一接入层的协议，自己模拟这个过程。来欺骗后端的 java。顺带看完了 java-sdk 的实现。
由于是公司内部系统，具体细节不能透露。我只能给一个通用的流程图。
</p>


<div class="figure">
<p><img src="https://media.githubusercontent.com/media/creamidea/creamidea.github.com/master/static/lfs/user-login.png" alt="user-login.png">
</p>
<p><span class="figure-number">Figure 1:</span> User Login</p>
</div>

<p>
另外，差点死在了 Koajs 的异步上，不过最后明白了 co-yield 的实现，也就没有什么问题了。
</p>

<p>
最后就是做好备份和监控。
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline21" class="outline-2">
<h2 id="orgheadline21"><span class="section-number-2">5</span> 智能⻝⽤菌养殖监控系统</h2>
<div class="outline-text-2" id="text-5">
</div><div id="outline-container-orgheadline17" class="outline-3">
<h3 id="orgheadline17"><span class="section-number-3">5.1</span> 项目地址</h3>
<div class="outline-text-3" id="text-5-1">
<ul class="org-ul">
<li><a href="https://github.com/creamidea/Mushroom/">Source Code</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline18" class="outline-3">
<h3 id="orgheadline18"><span class="section-number-3">5.2</span> 项目成员</h3>
<div class="outline-text-3" id="text-5-2">
<ul class="org-ul">
<li><a href="https://github.com/ahappyforest">Peng Liu</a></li>
<li><a href="https://github.com/JohnChain">JohnChain</a></li>
<li><a href="https://github.com/creamidea">Junjia Ni</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline19" class="outline-3">
<h3 id="orgheadline19"><span class="section-number-3">5.3</span> 项目描述</h3>
<div class="outline-text-3" id="text-5-3">
<p>
⻝⽤菌养殖环境的 <b>控制</b> 、 <b>管理</b> 、 <b>展示</b> 系统。主要分成 <b>硬件层-控制决策层-显示层</b> 。 <br >
</p>
<ul class="org-ul">
<li>硬件层：将各传感器采集上来的数值转发给控制决策层；执⾏指令，控制硬件设备⼯作。（PLC/C/Lua）</li>
<li>控制决策层：接收并存储上传的传感器数值；分析数据并⾃动下发控制命令，调节养殖室环境。(Python)</li>
<li>显示层：可视化当前养殖室内环境状况；提供相应的管理界⾯供养殖⼈员实时调控。(Django)</li>
</ul>
<p>
我在其中主要负责显示层功能的实现 <br >
</p>
</div>
</div>

<div id="outline-container-orgheadline20" class="outline-3">
<h3 id="orgheadline20"><span class="section-number-3">5.4</span> 难点和收获</h3>
<div class="outline-text-3" id="text-5-4">
<p>
(⊙o⊙)？，难点？那就是太年轻了。这个是大学毕设，当时什么都不懂，却又是一副很了不起的样子。嗯，就是这个样子。
如果说开来，那就是一段好长好长的回忆啦。改天写（嗯，对，这个就是我新挖的坑。）
</p>

<p>
期间遇到的问题都记录成 <a href="https://github.com/creamidea/Mushroom/issues">issues</a> 了。搞的最头疼的就是这个了 <a href="https://github.com/creamidea/Mushroom/issues/68">issue#68</a> 。
做完这个项目， <b>Python</b> 的姿势水平有了很大的提高。嗯，具体是什么提高呢？我也忘了。
</p>
</div>
</div>
</div>

<div id="outline-container-orgheadline22" class="outline-2">
<h2 id="orgheadline22"><span class="section-number-2">6</span> 尾声</h2>
<div class="outline-text-2" id="text-6">
<p>
还未结束。
</p>
</div>
</div>
</div>
<div id="postamble" class="status">
<meta name="viewport" content="width=device-width, initial-scale=1"><div id="meta-article"><p class="author">Junjia Ni</p>
<p class="email"><a href="mailto:creamidea@gmail.com">creamidea@gmail.com</a></p>
<p class="date">2016-10-09</p>
<p class="export-date">2016-10-14 Fri 10:08</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 25.1.1 (<a href="http://orgmode.org">Org</a> mode 8.3.6)</p>
<p class="validation"></p>
<p class="last-modification-time">2016-10-14 Fri 10:08</p></div><script asyn src="/static/article.js"></script><!-- Google Analytics --><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create', 'UA-38213594-1', 'auto');ga('send', 'pageview');</script><script async src='//www.google-analytics.com/analytics.js'></script><!-- End Google Analytics -->
</div>
</body>
</html>
